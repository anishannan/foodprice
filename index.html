<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Simple DSS — Food Expenditure Predictor with Graph</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    body{font-family:Inter,ui-sans-serif,system-ui; background:#0f1724; color:#e6eef8; margin:0; padding:32px;}
    .wrap{max-width:900px;margin:0 auto}
    .card{background:#0b1220;padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6);}
    label{display:block;font-size:13px;color:#94a3b8;margin-bottom:6px}
    input[type=number]{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:rgba(255,255,255,0.04);color:inherit;font-size:15px}
    .btn{padding:10px 12px;border-radius:10px;background:linear-gradient(90deg,#3b82f6,#60a5fa);color:#04203a;border:none;cursor:pointer;font-weight:600}
    .result{margin-top:10px;padding:12px;border-radius:10px;background:rgba(96,165,250,0.06);color:#dff3ff}
    canvas{margin-top:20px;max-width:100%;height:400px;background:#071b2a;border-radius:12px;padding:10px}
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Food Expenditure Predictor — Simple DSS</h1>
    <p>Predict monthly food spending using the regression model and visualize actual vs predicted values.</p>

    <div class="card">
      <label>Income (RM)</label>
      <input id="income" type="number" step="0.01" value="50" />
      <label>Family size (persons)</label>
      <input id="family" type="number" step="1" value="3" />
      <button id="predictBtn" class="btn">Predict Food</button>

      <div class="result" id="resultBox" style="display:none">
        <div><strong>Predicted Food Expenditure:</strong> <span id="predVal"></span></div>
      </div>

      <canvas id="foodChart"></canvas>
    </div>
  </div>

  <script>
    const COEF = {intercept: -1.1183, income: 0.1482, family: 0.7931};

    const DATA = [
      {food:5.2, income:28, family:3}, {food:5.1, income:26, family:3}, {food:5.6, income:32, family:2},
      {food:4.6, income:24, family:1}, {food:11.3, income:54, family:4}, {food:8.1, income:59, family:2},
      {food:7.8, income:44, family:3}, {food:5.8, income:30, family:2}, {food:5.1, income:40, family:1},
      {food:18.0, income:82, family:6}, {food:4.9, income:42, family:3}, {food:11.8, income:58, family:4},
      {food:5.2, income:28, family:1}, {food:4.8, income:20, family:5}, {food:7.9, income:42, family:3},
      {food:6.4, income:47, family:1}, {food:20.0, income:112, family:6}, {food:13.7, income:85, family:5},
      {food:5.1, income:31, family:2}, {food:2.9, income:26, family:2}
    ];

    function predict(income, family){
      return COEF.intercept + COEF.income * income + COEF.family * family;
    }

    const incomeEl = document.getElementById('income');
    const familyEl = document.getElementById('family');
    const predictBtn = document.getElementById('predictBtn');
    const resultBox = document.getElementById('resultBox');
    const predVal = document.getElementById('predVal');

    // Prepare chart
    const ctx = document.getElementById('foodChart');
    const chart = new Chart(ctx, {
      type: 'scatter',
      data: {
        datasets: [
          {
            label: 'Actual Food Expenditure',
            data: DATA.map(d => ({x: d.income, y: d.food})),
            backgroundColor: '#60a5fa'
          },
          {
            label: 'Predicted Food Expenditure',
            data: DATA.map(d => ({x: d.income, y: predict(d.income, d.family)})),
            backgroundColor: '#fbbf24'
          }
        ]
      },
      options: {
        scales: {
          x: {title: {display:true, text:'Income (RM)'}},
          y: {title: {display:true, text:'Food Expenditure (RM)'}}
        },
        plugins:{legend:{labels:{color:'#e6eef8'}}}
      }
    });

    predictBtn.addEventListener('click', ()=>{
      const inc = parseFloat(incomeEl.value);
      const fam = parseFloat(familyEl.value);
      const p = predict(inc, fam);
      predVal.textContent = 'RM ' + p.toFixed(2);
      resultBox.style.display = 'block';
      // Add new predicted point
      chart.data.datasets[1].data.push({x: inc, y: p});
      chart.update();
    });
  </script>
</body>
</html>

